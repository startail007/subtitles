<!DOCTYPE html>
<html>

<head>
    <title>Untitled Document</title>
    <!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">-->
    <meta http-equiv="Content-Security-Policy-Report-Only" content="block-all-mixed-content">
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <link href="css/videocontroller.css" rel="stylesheet">
    <script src="jquery-1.9.1.js"></script>
    <script src="js/videocontroller.js"></script>
    <script src="js/module.js"></script>
    
    <!--<link href="http://vjs.zencdn.net/4.12/video-js.css" rel="stylesheet">
  <script src="http://vjs.zencdn.net/4.12/video.js"></script>
 <script src="https://github.com/videojs/videojs-contrib-media-sources/releases/download/v0.1.0/videojs-media-sources.js"></script>
  <script src="https://github.com/videojs/videojs-contrib-hls/releases/download/v0.11.2/videojs.hls.min.js"></script>-->
    
    <!--<link href="https://vjs.zencdn.net/7.2.3/video-js.css" rel="stylesheet">-->

  <!-- If you'd like to support IE8 (for Video.js versions prior to v7) -->
  <!--<script src="https://vjs.zencdn.net/ie8/ie8-version/videojs-ie8.min.js"></script>-->
    
    <!--<script src="https://vjs.zencdn.net/7.2.3/video.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-watermark@1.0.1/es5/plugin.min.js"></script>-->
    <!--<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>-->
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.2.4/video-js.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.2.4/video.js"></script>	
<script src="https://cdn.streamroot.io/videojs-hlsjs-plugin/1/stable/videojs-hlsjs-plugin.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/6.12.1/ie8/videojs-ie8.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-flash/2.1.2/videojs-flash.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>-->
	
    	<!--<link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/6.3.3/video-js.css" rel="stylesheet">
	<script src="https://cdn.bootcss.com/video.js/6.3.3/ie8/videojs-ie8.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/6.3.3/video.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/videojs-flash@2/dist/videojs-flash.min.js"></script>
	<script src="https://cdn.streamroot.io/videojs-hlsjs-plugin/1/stable/videojs-hlsjs-plugin.js"></script>	
	<script src="https://cdn.jsdelivr.net/npm/videojs-contrib-media-sources@4.7.2/es5/videojs-contrib-media-sources.min.js"></script>-->
    <!--<script src="https://cdn.streamroot.io/videojs-hlsjs-plugin/1/stable/videojs-hlsjs-plugin.js"></script>-->
<!--<script src="https://unpkg.com/@videojs/http-streaming@1.3.0/dist/videojs-http-streaming.js"></script>-->
    
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.2.4/video-js.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.min.js"></script>-->
    
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>-->
<!--<script src="https://s3.ssl.qhres.com/!fd546749/chimee-player.browser.js"></script>-->

    
    <!--<link href="css/videojs.watermark.css" rel="stylesheet">    
    <script src="js/videojs.watermark.js"></script>-->
    
    <script type="text/javascript" src="ckplayerX/ckplayer/ckplayer.js" charset="utf-8"></script>
    <style>
        body {
            font-family: "Times New Roman", "微軟正黑體", "Microsoft JhengHei", sans-serif;
            font-size: 16px;
            -moz-user-select: -moz-none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -o-user-select: none;
            user-select: none;
        }

        .clear {
            clear: left;
        }

        .tool {
            position: relative;
            display: block;
            width: 100%;
            background-color: #eeeeee;
            border: 1px solid #ccc;
            box-sizing: border-box;
            padding: 5px;
        }

        .tool .text {
            position: relative;
            display: inline-block;
            padding: 5px;
            box-sizing: border-box;
            background-color: #ffffff;
            height: auto;
            vertical-align: middle;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 1px;
            box-shadow: 0px 1px 0px rgba(255, 248, 217, 0.5), inset 0px 1px 0px rgba(33, 68, 147, 0.5), inset 0px 2px 4px rgba(0, 0, 0, 0.25);
        }

        .tool .text:focus {
            /*outline: 2px solid #00c4ff;*/
            box-shadow: 0px 1px 0px rgba(255, 248, 217, 0.5), inset 0px 1px 0px rgba(33, 68, 147, 0.5), inset 0px 2px 4px rgba(0, 0, 0, 0.25), 0 0 0 1px #00c4ff;
            /*box-shadow: 0 0 0 1px #00c4ff;*/
        }


        /*.tool .text:before {
            content: "";
            position: absolute;
            display: block;
            height: 100%;
            width: 80px;
            background-color: brown;
        }*/

        .tool .label {
            position: relative;
            display: inline-block;
            padding: 5px;
            /*font-size: 16px;*/
            background-color: #eeeeee;
            text-align: center;
            box-sizing: border-box;
            vertical-align: middle;
            border-radius: 5px;
            vertical-align: middle;
        }

        .tool .label.single {
            display: block;
        }



        .tool .group {
            position: relative;
            display: inline-block;
            padding: 2px;
            /*font-size: 16px;*/
            background-color: #eeeeee;
            text-align: center;
            border: 1px solid rgba(204, 204, 204, 0.5);
            box-sizing: border-box;
            border-radius: 5px;
            vertical-align: middle;
            box-shadow: inset 0px -1px 1px rgba(33, 68, 147, 0.5), inset 0px 1px 1px rgba(255, 248, 217, 0.5);
        }

        .tool .button {
            position: relative;
            display: inline-block;
            padding: 5px;
            /*font-size: 16px;*/
            background-color: #eeeeee;
            text-align: center;
            /*border: 1px solid #f0f0f0;*/
            box-sizing: border-box;
            vertical-align: middle;
            cursor: pointer;
            border-radius: 5px;
            vertical-align: middle;
            transition: background .3s, color .3s, box-shadow .3s;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5), inset 0px -1px 2px rgba(33, 68, 147, 0.5), inset 0px 1px 1px rgba(255, 248, 217, 0.5), inset 0px 2px 5px rgb(255, 255, 255), 0px 2px 8px rgba(8, 31, 83, 0.5);
        }

        .mainVideoController .buttonGroup .button {
            /*box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5), inset 0px 1px 1px rgba(255, 255, 255, 0.5), 0px 2px 4px rgba(0, 0, 0, 0.25);*/
        }

        .tool .button:hover {
            background-color: #f2edcf;
        }

        .tool .button.active {
            color: #fff;
            background-color: #414141;
            /*box-shadow: inset 0px -1px 1px rgba(255, 251, 234, 0.25), inset 0px 1px 2px rgba(4, 13, 31, 0.75), 0px 1px 2px rgba(0, 0, 0, 0.25);*/
            /*background-color: #eeeeee;*/
            /*color: #3c3c3c;*/
            box-shadow: inset 0px -1px 2px rgba(255, 248, 217, 0.5), inset 0px 1px 1px rgba(33, 68, 147, 0.5), inset 0px -2px 2px 1px rgba(255, 255, 255, 0.1), inset 0px 1px 6px 2px rgba(0, 0, 0, 0.5), inset 0px 0px 0px 1px rgba(0, 0, 0, 0.25);
        }

        .tool .button.active:hover {
            background-color: #525252;
        }

        .tool .button:after {
            content: "";
            position: absolute;
            display: block;
            height: 1px;
            background-color: rgba(255, 248, 217, 0.5);
            top: 2px;
            left: 5px;
            /*width: 20px;*/
            right: 5px;
            box-shadow: 0px 0px 6px 2px rgba(255, 248, 217, 0.75);
            opacity: 0.5;
            border-radius: 2px;
            transition: opacity .3s;
        }

        .tool .button.active:after {
            top: auto;
            bottom: 4px;
            opacity: 0.3;
            box-shadow: 0px 0px 3px 1px rgba(255, 248, 217, 0.5);
        }

        #buttonText {}

        #appendValue {
            width: 60px;
            text-align: center;
        }

        #textVideoSrc {
            /*width: 400px;*/
            width: 100%;
        }

        #textVideoSrcGroup {
            /*width: 400px;*/
            width: 100%;
        }



        #timeText,
        #durationTimeText {
            padding: 5px;
            font-size: 24px;
            text-align: center;
            border: 1px solid #ccc;
            width: 160px;
            box-shadow: inset 0px -1px 0px rgba(33, 68, 147, 0.5), inset 0px 1px 0px rgba(255, 248, 217, 0.5);
        }

        #videoSpeed .button {
            min-width: 35px;
        }

        .video {
            position: relative;
            padding-bottom: 40px;
            width: 100%;
            height: 300px;
            display: block;
            background-color: #e6e6e6;
            resize: vertical;
            padding-bottom: 15px;
            overflow-x: hidden;
            overflow-y: auto;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        #video {
            width: 100%;
            height: 100%;
            display: block;
            background-color: #393939;
        }

        .srtItem {
            position: relative;
            display: block;
            width: 100%;
            float: left;
            font-size: 18px;
            line-height: 18px;
            height: 400px;
            overflow-x: hidden;
            overflow-y: auto;
            resize: vertical;
            border: 1px solid #ccc;
            box-sizing: border-box;
            background-color: #eeeeee;
            min-height: 247px;
        }

        .srtItem.focus {
            /*outline: 2px solid #00c4ff;*/
            box-shadow: 0 0 0 1px #00c4ff;
        }
        
        .main{
            position: relative;
            display: inline-block;
        }

        .main.open .srtItem {
            width: 50%;
        }

        .table01 {
            position: relative;
            width: 100%;
        }

        .item {
            transition: background .3s, color .3s;
            background-color: #ffffff;
            color: #242424;
        }

        .item.active {
            background-color: #414141;
            color: #ffffff;
        }

        .item .time {
            margin-right: 10px;
            width: 100px;
            padding: 4px;
        }

        .item .subtitle {
            width: 100%;
            padding: 4px;
        }

        .win {
            position: relative;
            display: none;
            width: 50%;
            float: left;
        }

        .pageButton {
            position: relative;
            display: block;
            width: 100%;
            background-color: #e3e3e3;
            border: 1px solid #ccc;
            box-sizing: border-box;
            padding: 5px;
            height: 35px;
            overflow: hidden;
        }

        .pageButton .button {
            transition: background .3s, color .3s, box-shadow .3s, top .3s;
            border-radius: 5px 5px 0px 0px;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5), inset 0px -1px 2px rgba(33, 68, 147, 0.25), inset 0px 1px 1px rgba(255, 248, 217, 0.25), inset 0px 2px 3px rgba(255, 255, 255, 0.5);
            color: #fff;
            background-color: #414141;
        }

        .pageButton .button:after {
            top: auto;
            bottom: 4px;
            opacity: 0.3;
            box-shadow: 0px 0px 6px 2px rgba(255, 248, 217, 0.75);
        }

        .pageButton .button.active:after {
            top: auto;
            bottom: 4px;
            opacity: 0.5;
            box-shadow: 0px 0px 6px 2px rgba(255, 248, 217, 0.75);
        }

        .pageButton .button.active {
            /*top: -2px;*/
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5), inset 0px -1px 1px rgba(33, 68, 147, 0.5), inset 0px 1px 1px rgba(255, 248, 217, 0.5), inset 0px 2px 5px rgb(255, 255, 255), 0px 2px 4px rgba(0, 0, 0, 1);
            color: #000;
            background-color: #eeeeee;
        }

        .pageButton .button:hover {
            background-color: #525252;
        }

        .pageButton .button.active:hover {
            background-color: #eeeeee;
            /*background-color: #f2edcf;*/
        }

        .main.open .win {
            display: block
        }

        .textarea {
            position: relative;
            display: block;
            width: 100%;
            height: 353px;
            box-sizing: border-box;
            resize: vertical;
            background-color: #eeeeee;
            padding: 5px;
            min-height: 200px;
            /*box-shadow: 0px 1px 0px rgba(255, 248, 217, 0.5), inset 0px 1px 0px rgba(33, 68, 147, 0.5), inset 0px 2px 4px rgba(0, 0, 0, 0.25);*/
        }

        .textarea:focus {
            /*outline: 2px solid #00c4ff;*/
            box-shadow: 0 0 0 1px #00c4ff;
        }

        #videoSrc {
            width: 100%;
        }

        .message {
            position: absolute;
            display: block;
            /* color: #ff0000; */
            top: 0px;
            right: 0px;
            padding: 10px;
            height: 12px;
            line-height: 12px;
            border: 1px solid rgba(0, 0, 0, 0);
            font-size: 12px;
            font-weight: bold;
            /* box-sizing: border-box; */
            vertical-align: top;
            color: #333333;
        }

        .message.error {
            /*color: #ff0000;*/
        }

        .message.correct {
            /*color: #00ff00;*/
        }

        .message.correct:before {
            content: "";
            position: absolute;
            display: block;
            width: 12px;
            height: 12px;
            border: 2px solid #333333;
            border-radius: 12px;
            top: 50%;
            transform: translate(-50%, -50%);
            left: 0px;
            box-sizing: border-box;
        }

        .message.error:before {
            content: "";
            position: absolute;
            display: block;
            width: 2px;
            height: 12px;
            background-color: #333333;
            transform: translate(-50%, -50%)rotate(45deg);
            top: 50%;
            left: 0px;
        }

        .message.error:after {
            content: "";
            position: absolute;
            display: block;
            width: 2px;
            height: 12px;
            background-color: #333333;
            transform: translate(-50%, -50%) rotate(-45deg);
            top: 50%;
            left: 0px;
        }

    </style>
    <script>
        function compareNumbers(a, b) {
            return a - b;
        }

        $(function() {
            $(document).delegate('textarea', 'keydown', function(e) {
                var keyCode = e.keyCode || e.which;
                if (keyCode == 9) {
                    e.preventDefault();
                    var start = this.selectionStart;
                    var end = this.selectionEnd;
                    $(this).val($(this).val().substring(0, start) + "\t" + $(this).val().substring(end));
                    this.selectionStart = this.selectionEnd = start + 1;
                }
            });

            //項目選擇器

            var mainVideo = $("#video");
            var time = [];
            var subtitle = [];
            var currentTime = 0;
            var select = [0];
            var srtItem = $(".srtItem");
            var table01 = srtItem.find(".table01");
            var endSelect = 0;

            var type001 = ["time subtitle", "time", "subtitle", "JS"];

            var item01 = new itemModule($(".srtItem").find(".table01")[0]);
            item01.updateFun = function(type, index, item) {
                if (type == "add") {
                    table01.append(item);
                    $(item).on("click", function(e) {
                        var ct = table01.find(".item").index(e.currentTarget);
                        if (e.ctrlKey) {
                            endSelect = ct;
                            if (hasSelect(endSelect) == -1) {
                                addSelect(endSelect);
                            } else if (select.length > 1) {
                                removeSelect(endSelect);
                            }
                            setSelect(select);
                        } else if (e.shiftKey) {
                            var s = Math.min(endSelect, ct);
                            var e = Math.max(endSelect, ct);
                            setSelectRange(s, e);
                        } else {
                            endSelect = ct;
                            setSelect([endSelect]);
                        }
                    });
                } else if (type == "remove") {
                    table01.find(".item").eq(index).off("click").remove();
                }
            }
            updateData("subtitle");
            $(".textarea").on("keyup paste", textarea01);

            $("#textVideoSrc").on("keyup paste", function() {
                mainVideo[0].src = $("#textVideoSrc").val();
            });



            function createMessage() {
                $("#textVideoSrc").next(".message").remove();
                var temp = document.createElement("div");
                $(temp).addClass("message");
                $("#textVideoSrc").after(temp);
                $(temp).css({
                    display: "none"
                }).stop(true).fadeIn(500).delay(2000).fadeOut(500, function() {
                    this.remove();
                });
                return $(temp)
            }


            function textarea01(e) {
                updateData(type001[radioButton01.index]);
                if (table01.find(".item").length - 1 < select[select.length - 1]) {
                    setSelect([table01.find(".item").length - 1]);
                }
            }

            var radioButton01 = new radioButtonModule($("#textPageButton")[0]);
            radioButton01.updateFun = function(type) {
                if (type == "new") {
                    updateTextarea();
                }
            }
            radioButton01.index = 2;

            var videoSpeedRadioButton01 = new radioButtonModule($("#videoSpeed")[0]);
            videoSpeedRadioButton01.updateFun = function(type) {
                if (type == "old") {

                } else if (type == "new") {
                    switch (videoSpeedRadioButton01.index) {
                        case 0:
                            mainVideo[0].playbackRate = 0.5;
                            break;
                        case 1:
                            mainVideo[0].playbackRate = 1;
                            break;
                        case 2:
                            mainVideo[0].playbackRate = 2;
                            break;
                    }
                }
            }
            videoSpeedRadioButton01.index = 1;

            var buttonText01 = new switchButtonModule($("#buttonText")[0]);
            buttonText01.updateFun = function(type) {
                if (type == "change") {
                    if (buttonText01.active) {
                        $(".main").addClass("open");
                    } else {
                        $(".main").removeClass("open");
                    }
                }
            }

            var buttonHotkey01 = new switchButtonModule($("#buttonHotkey")[0]);
            buttonHotkey01.updateFun = function(type) {
                if (type == "change") {}
            }
            buttonHotkey01.active = true;

            mainVideo.on("loadstart", function() {
                createMessage().text("路徑正確").addClass("correct");
            });
            mainVideo.on("error", function() {
                createMessage().text("路徑有誤").addClass("error");
            });
            mainVideo.on("loadeddata", function() {
                $("#timeText").html(timeFormat(0));
                $("#durationTimeText").html(timeFormat(mainVideo[0].duration));
            });
            mainVideo.on("timeupdate", function() {
                currentTime = mainVideo[0].currentTime;
                $("#timeText").html(timeFormat(currentTime));
            });

            table01.find(".item").plural(select).addClass("active");

            srtItem.attr('tabindex', -1).focus(function() {});
            srtItem.focusin(function() {
                $(this).addClass("focus")
            });
            srtItem.focusout(function() {
                $(this).removeClass("focus")
            });

            function setSelect(value) {
                table01.find(".item.active").removeClass("active");
                select = value;
                select.sort(compareNumbers);
                table01.find(".item").plural(select).addClass("active");
                if (select.length <= 1) {
                    var a = table01.find(".item").eq(select[0]).offset().top + srtItem.scrollTop() - srtItem.offset().top;
                    if (a - srtItem.scrollTop() + table01.find(".item").eq(select[0]).height() > srtItem.height()) {
                        srtItem.scrollTop(a - srtItem.height() * 0.5);
                    } else if (a - srtItem.scrollTop() < 0) {
                        srtItem.scrollTop(a - srtItem.height() * 0.5);
                    }
                }
            }

            function hasSelect(value) {
                for (var i = 0; i < select.length; i++) {
                    if (select[i] == value) {
                        return i;
                        break;
                    }
                }
                return -1;
            }

            function addSelect(value) {
                if (hasSelect(value) == -1) {
                    select.push(value);
                    select.sort(compareNumbers);
                }
            }

            function removeSelect(value) {
                var i = hasSelect(value);
                if (i != -1) {
                    select.splice(i, 1);
                    select.sort(compareNumbers);
                }
            }

            function setSelectRange(s, e) {
                var temp = [];
                for (var i = s; i <= e; i++) {
                    temp.push(i);
                }
                setSelect(temp);
            }
            
            function updateTextarea() {
                $(".textarea").val(getTextarea(type001[radioButton01.index]));
            }

            function getTextarea(type) {
                var s = "";
                if (type == "time") {
                    for (var i = 0; i < time.length; i++) {
                        s += timeFormat(time[i]) + (i < time.length - 1 ? "\n" : "");
                    }
                } else if (type == "subtitle") {
                    for (var i = 0; i < subtitle.length; i++) {
                        s += subtitle[i] + (i < subtitle.length - 1 ? "\n" : "");
                    }
                } else if (type == "time subtitle") {
                    for (var i = 0; i < subtitle.length; i++) {
                        s += timeFormat(time[i]) + "\t" + subtitle[i] + (i < subtitle.length - 1 ? "\n" : "");
                    }
                } else if (type == "JS") {
                    for (var i = 0; i < subtitle.length; i++) {
                        s += '{time:' + time[i] + ',text:"' + subtitle[i] + '"}' + (i < subtitle.length - 1 ? ",\n" : "");
                    }
                }
                return s;
            }

            function updateData(type) {
                var ss = $(".textarea").val();
                var aa = ss.split("\n");
                if (type == "subtitle") {
                    for (var i = 0; i < aa.length; i++) {
                        subtitle[i] = aa[i];
                        time[i] = time[i] != undefined ? time[i] : 0;
                    }
                } else if (type == "time") {
                    for (var i = 0; i < aa.length; i++) {
                        time[i] = toTime(aa[i]);
                        subtitle[i] = subtitle[i] != undefined ? subtitle[i] : "";
                    }
                } else if (type == "time subtitle") {
                    for (var i = 0; i < aa.length; i++) {
                        var temp = aa[i].split("\t");
                        time[i] = toTime(temp[0]);
                        subtitle[i] = temp.length > 1 ? temp[1] : "";
                    }
                } else if (type == "JS") {
                    for (var i = 0; i < aa.length; i++) {
                        var temp = aa[i].replace(/{|}|time:|text:|"/g, "").split(",");
                        time[i] = Number(temp[0]);
                        subtitle[i] = temp.length > 1 ? temp[1] : "";
                    }
                }
                var len = Math.max(time.length, subtitle.length);
                if (aa.length < len) {
                    subtitle.splice(aa.length, subtitle.length - aa.length);
                    time.splice(aa.length, time.length - aa.length);
                }
                updateSubtitle();
                updateItem();
            }

            function updateSubtitle() {
                var temp = [];
                var temp0 = -1;
                for (var i = 0; i < time.length; i++) {
                    if (time[i] > temp0) {
                        temp0 = time[i];
                        temp.push({
                            time: time[i],
                            text: subtitle[i]
                        });
                    }
                }
                $("#video")[0].controller.subtitleData = temp;
            }

            function removeItem(SIndex, EIndex) {
                var temp = Array.range(SIndex, EIndex);
                item01.removeItem(temp);
            }

            function createItem(SIndex, EIndex) {
                var temp = [];
                for (var i = SIndex; i < EIndex; i++) {
                    var ee = $(document.createElement("tr"));
                    ee.addClass("item").append('<td class="time">' + timeFormat(time[i]) + '</td><td class="subtitle">' + subtitle[i] + '</td>');
                    temp.push(ee[0]);
                }
                item01.addItem(SIndex, temp);
            }
            
            function updateItem() {
                var len = Math.max(subtitle.length, time.length)
                if (len < table01.find(".item").length) {
                    removeItem(len, table01.find(".item").length);
                } else if (len > table01.find(".item").length) {
                    createItem(table01.find(".item").length, len);
                }
                for (var i = 0; i < subtitle.length; i++) {
                    var bbb = table01.find(".item").eq(i);
                    bbb.find(".time").html(timeFormat(time[i] != undefined ? time[i] : 0));
                    bbb.find(".subtitle").html(subtitle[i]);
                }
            }
            
            function setCurrentTime(value) {
                currentTime = value;
                mainVideo[0].currentTime = currentTime;
                $("#timeText").html(timeFormat(currentTime));
            }

            $("#buttonTimeWrite").click(function(e) {
                timeWrite();
            });

            var appendValue = 0;
            $("#buttonSubtraction").click(function(e) {
                appendValue -= 0.01;
                appendValue = Number(appendValue.toFixed(3))
                $("#appendValue").val(appendValue);
            });

            $("#buttonAddition").click(function(e) {
                appendValue += 0.01;
                appendValue = Number(appendValue.toFixed(3))
                $("#appendValue").val(appendValue);
            });

            $("#buttonAppend").click(function(e) {
                timeAppend(appendValue);
            });

            $("#appendValue").on("change", function() {
                appendValue = Number($("#appendValue").val());
                appendValue = Number(appendValue.toFixed(3));
                console.log(appendValue);
                $("#appendValue").val(appendValue);
            });


            function timeWrite() {
                $.each(select, function(key, value) {
                    time[value] = mainVideo[0].currentTime;
                });
                updateTextarea();
                endSelect = Math.min(table01.find(".item").length - 1, select[select.length - 1] + 1)
                setSelect([endSelect]);
                updateSubtitle();
                updateItem();
            }

            function timeAppend(timeValue) {
                $.each(select, function(key, value) {
                    time[value] += timeValue;
                    time[value] = Number(time[value].toFixed(3));
                });
                updateTextarea();
                updateSubtitle();
                updateItem();
            }
            var temp = 0;
            document.onkeydown = function keydown(event) {
                if (buttonHotkey01.active) {
                    if (event.ctrlKey) {
                        if (srtItem.hasClass("focus")) {
                            if (event.keyCode == 65) {
                                endSelect = 0;
                                setSelectRange(0, table01.find(".item").length - 1);
                            } else if (event.keyCode == 67) {
                                select.sort(compareNumbers);
                                var s = "";
                                for (var i = 0; i < select.length; i++) {
                                    var item = table01.find(".item").eq(select[i]);
                                    s += item.find(".time").text() + "\t" + item.find(".subtitle").text() + "\n";
                                }
                                copy(s);
                                srtItem.focus();
                            }
                        }
                        if (event.keyCode == 81) {
                            time = [];
                            updateData("time");
                        }
                    } else if (event.shiftKey) {
                        if (event.keyCode == 187) {
                            if (temp < 50) {
                                temp++;
                            }
                            timeAppend(0.01 * (temp >= 10 ? 10 : 1) * (temp >= 50 ? 10 : 1));
                        } else if (event.keyCode == 189) {
                            if (temp < 50) {
                                temp++;
                            }
                            timeAppend(-0.01 * (temp >= 10 ? 10 : 1) * (temp >= 50 ? 10 : 1));
                        }
                    } else if (event.altKey) {
                        //
                    } else {
                        if (event.keyCode == 87) {
                            endSelect = Math.max(0, select[0] - 1);
                            setSelect([endSelect]);
                        } else if (event.keyCode == 83) {
                            endSelect = Math.min(table01.find(".item").length - 1, select[select.length - 1] + 1);
                            setSelect([endSelect]);
                        } else if (event.keyCode == 65) {
                            if (temp < 10) {
                                temp++;
                            }
                            currentTime -= 0.01 * (temp >= 10 ? 10 : 1);
                            currentTime = Number(currentTime.toFixed(3))
                            setCurrentTime(currentTime);
                        } else if (event.keyCode == 68) {
                            if (temp < 10) {
                                temp++;
                            }
                            currentTime += 0.01 * (temp >= 10 ? 10 : 1);
                            currentTime = Number(currentTime.toFixed(3))
                            setCurrentTime(currentTime);
                        } else if (event.keyCode == 82) {
                            timeWrite();
                        } else if (event.keyCode == 70) {
                            if (!mainVideo[0].paused) {
                                mainVideo[0].pause();
                            } else {
                                mainVideo[0].play();
                            }
                        }
                    }
                }
                console.log(event.keyCode)
            };
            document.onkeyup = function keydown(event) {
                temp = 0;
            }


        });



        function copy(s) {
            var clip_area = document.createElement('textarea');
            clip_area.textContent = s;

            document.body.appendChild(clip_area);
            clip_area.select();

            document.execCommand('copy');
            clip_area.remove();
        }

    </script>
</head>

<body>
    <!--oncontextmenu="return false" onselectstart="return false"-->
    <div class="tool">
        <div class="group" id="videoSrc">
            <div class="label single">影片路徑</div>
            <div class="group" id="textVideoSrcGroup">
                <input id="textVideoSrc" type="text" value="demo.mp4" class="text">
            </div>
        </div>
    </div>
    <div class="video">
        <video id="video" src="demo.mp4" OPA_controller subtitle></video>
    </div>
    <div class="tool">
        <div class="group">
            <div class="label single">時間數值</div>
            <div id="timeText" class="label"></div>
            <div class="label">/</div>
            <div id="durationTimeText" class="label"></div>
        </div>
        <div class="group">
            <div class="label single">時間修改</div>
            <div id="buttonTimeWrite" class="button">寫入時間</div>
            <div class="group">
                <div class="label">時間數值偏移</div>
                <div class="group">
                    <div id="buttonSubtraction" class="button">-</div>
                    <div class="group">
                        <input id="appendValue" type="text" value="0" class="text">
                    </div>
                    <div id="buttonAddition" class="button">+</div>
                </div>
                <div id="buttonAppend" class="button">添加</div>
            </div>
        </div>
        <div class="group">
            <div class="label single">撥放倍速</div>
            <div class="group" id="videoSpeed">
                <div id="buttonHalved" class="button">0.5</div>
                <div id="buttonNormal" class="button">1</div>
                <div id="buttonDouble" class="button">2</div>
            </div>
        </div>
        <div id="buttonText" class="button">資料輸入</div>
        <div id="buttonHotkey" class="button">快捷鍵</div>
    </div>
    <div class="main">
        <div class="srtItem" oncontextmenu="return false" onselectstart="return false">
            <table class="table01">
                <tbody>
                </tbody>
            </table>
            <div class="select"></div>
        </div>
        <div class="win">
            <div class="tool">
                <div class="pageButton" id="textPageButton">
                    <div id="buttonTimeSrt" class="button">時間+字幕</div>
                    <div id="buttonTime" class="button">時間</div>
                    <div id="buttonSrt" class="button">字幕</div>
                    <div id="buttonJS" class="button">JS</div>
                </div>
                <textarea class="textarea" placeholder="請輸入字幕內容"></textarea>
            </div>
        </div>
    </div>
    <!--<div id="myvideo">
        <video id="video01" src="demo.mp4" width="400px" height="400px" controls="controls"></video>
        <div class="abc"></div>
    </div>-->
    
    
    <!--<h1>Video</h1>

  <video id="my_video_1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="268" 
  data-setup='{}'>
    <source src="http://iphone-streaming.ustream.tv/uhls/3064708/streams/live/iphone/playlist.m3u8" type='application/x-mpegURL'>
  </video>

  <script>
  var player = videojs('my_video_1');
  </script>-->
    
    <!--<video id="my-video" class="video-js" controls preload="auto" width="640" height="264"
  poster="MY_VIDEO_POSTER.jpg" data-setup="{}">
    <source src="MY_VIDEO.mp4" type='video/mp4'>
    <source src="MY_VIDEO.webm" type='video/webm'>
    <p class="vjs-no-js">
      To view this video please enable JavaScript, and consider upgrading to a web browser that
      <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
    </p>
  </video>-->
    
    <!--<div class="video02">
        <video id="video02" OPA_controller></video>
    </div>
<script>
    
  //var player02 = videojs('video02');
  var video = document.getElementById('video02');
  if(Hls.isSupported()) {
    var hls = new Hls();
    hls.loadSource('https://135zyv4.xw0371.com/2018/07/28/QEVBRgqY93r3sxzM/playlist.m3u8');
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,function() {
      //video.play();
        video.volume = 1;
  });
 }
 // hls.js is not supported on platforms that do not have Media Source Extensions (MSE) enabled.
 // When the browser has built-in HLS support (check using `canPlayType`), we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video element throught the `src` property.
 // This is using the built-in support of the plain video element, without using hls.js.
 // Note: it would be more normal to wait on the 'canplay' event below however on Safari (where you are most likely to find built-in HLS support) the video.src URL must be on the user-driven
 // white-list before a 'canplay' event will be emitted; the last video event that can be reliably listened-for when the URL is not on the white-list is 'loadedmetadata'.
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = 'https://135zyv4.xw0371.com/2018/07/28/QEVBRgqY93r3sxzM/playlist.m3u8';
    video.addEventListener('loadedmetadata',function() {
      //video.play();
        video.volume = 1;
    });
  }
</script>-->
    
    <style>
        .video02 {
            position: relative;
            display: block;
            width: 100%;
            height: 300px;
            background-color: #e6e6e6;
            box-sizing: border-box;
        }

        #video02 {
            width: 100%;
            height: 100%;
            display: block;
            background-color: #393939;
        }
    </style>
    
    <!--<video data-setup='{}' id="my-video" class="video-js" controls preload="auto" width="400" height="400">-->
    <video data-setup='{}' id="my-video" class="video-js" autoplay controls preload="auto" width="400" height="400" webkit-playsinline="true" playsinline="true" x5-video-player-type="h5" x5-video-player-fullscreen="true" x-webkit-airplay="allow" x5-video-orientation="portraint">    
        <!--<source src="demo.mp4" type='video/mp4'>-->
        <!--<source src="https://135zyv4.xw0371.com/2018/07/28/QEVBRgqY93r3sxzM/playlist.m3u8" type='application/x-mpegURL'>-->
        <!--<source src="https://135zyv4.xw0371.com/2018/07/31/vegY3nLWw7UsHQRU/playlist.m3u8" type='application/x-mpegURL'>--> 
	   <source src="http://iqiyi.com-v-iqiyi.com/20181005/7612_a4e83522/index.m3u8" type='application/x-mpegURL'>
	   <!--<source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4'>--> 
    </video>
    <div class="video003" style="width: 100%;height: 500px;"></div>

  
    
    <script>
  var player = videojs('my-video', {
  /*html5: {
    hls: {
      withCredentials: true,
      overrideNative: true
    }
  }*/
	  /*techOrder: ['flash'],
	  flash: {
            swf: 'js/video-js.swf'
          }*/
});
	    
        /*videojs.Hls.xhr.beforeRequest = function(options) {
  //options.uri = options.uri.replace('example.com', 'foo.com');
console.log(options);
  return options;
};*/
/*player.watermark({
    file: 'https://www.designevo.com/res/templates/thumb_small/colorful-and-eye-shaped-lens.png',
    xpos: 50,
    ypos: 50,
    xrepeat: 0,
    opacity: 0.5,
});*/
  //player.watermark();
        
        
        
</script>
	
	
    <script>
    var videoObject = {
		container: '.video003',//“#”代表容器的ID，“.”或“”代表容器的class
		variable: 'player',//该属性必需设置，值等于下面的new chplayer()的对象
		autoplay:true,//自动播放	    	
		/*html5m3u8:true,*/
		video:"http://www.flashls.org/playlists/test_001/stream.m3u8"
	};
	var player=new ckplayer(videoObject);
	    player.V.controls = "";
	    /*$(player.CD).click(function(){
	    	player.videoPlay();
	    });*/
	
	console.log(player);
    </script>
    
    <!--<div class="chimee-container">
    <video tabindex="-1"></video>
  </div>
    
     <script>         

var player = new ChimeePlayer({
  wrapper: '.chimee-container',
  src: 'https://135zyv4.xw0371.com/2018/07/28/QEVBRgqY93r3sxzM/playlist.m3u8',
  autoplay: true,
  box:'hls',
  controls: true
});
</script>-->
    
    <style>
        .vjs-watermark{
            pointer-events: none;
        }
        #my-video{
            position: relative;
            display: block;
            background-color: rgba(240, 255, 255, 0.5);
            width: 100%;
            height: 400px;
        }
        .abc{
            position: absolute;
            display: block;
            background-color: rgba(240, 255, 255, 0.5);
            width: 100%;
            height: 20%;
            left: 0%;
            top: 0%;
            z-index:2147483647;
        }
        #video01{
            position: absolute;
            //z-index: 1000;
            display: block;
            width: 100%;
            left: 0px;
            top: 0px;
            height: 100%;
            /*background-color: black;
            transform-origin: left top;
            transform: rotate(90deg);*/
        }
        #myvideo:-webkit-full-screen{
          /* properties */
            transform-origin: left top;
            transform: rotate(90deg);
        }

        :-moz-full-screen {
          /* properties */
        }

        :-ms-fullscreen {
          /* properties */
        }

        :full-screen { /*pre-spec */
          /* properties */
        }

        :fullscreen { /* spec */
          /* properties */
        }
    </style>
    <script>
        /*$(function(){
            setInterval(function(){
                //$(".abc").css("z-index",9999999999999999999999);
                //console.log($(".abc"));
                //$(".abc").css({"z-index":9999999999999999999999});
                $(".abc").css({"zIndex":2147483647});
            },10);
        });  */
        $(".abc").click(function(){
            //alert("aaa");
            /*var elem = document.getElementById("myvideo");
            if (elem.requestFullscreen) {
              elem.requestFullscreen();
            } else if (elem.msRequestFullscreen) {
              elem.msRequestFullscreen();
            } else if (elem.mozRequestFullScreen) {
              elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) {
              elem.webkitRequestFullscreen();
            }*/
            doFullScreen(document.getElementById("myvideo"));
        });
        
        window.addEventListener("orientationchange",onOrientationchange ,false);
   function onOrientationchange() {
      if (window.orientation === 180 || window.orientation === 0) {
              //直式
          //alert("直式")
      }
      if (window.orientation === 90 || window.orientation === -90 ){
              //橫式
          //alert("橫式")
      } 
   }
        
        function doFullScreen(elem){
         // 取得要顯示為全螢幕的容器
         //var elem = $("#fullScreenTarget")[0];

         var isFullScreen = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen;

         // 目前非全螢幕狀態 開啟全螢幕
         if( !isFullScreen ){
          if (elem.requestFullscreen) {
           elem.requestFullscreen();
          } else if (elem.msRequestFullscreen) {
           elem.msRequestFullscreen();
          } else if (elem.mozRequestFullScreen) {
           elem.mozRequestFullScreen();
          } else if (elem.webkitRequestFullscreen) {
           elem.webkitRequestFullscreen();
          }
         }
         // 目前為全螢幕狀態 關閉全螢幕
         else{
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          }
         }
        }
        
    </script>
</body>

</html>
